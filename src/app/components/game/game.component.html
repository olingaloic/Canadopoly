
<div class="container">
    <div class="row">
      <board class="board"></board>
      <div class="right-side">
        <div>        
          <p style="text-align: center; display: inline;">Your balance : </p><p style="display: inline-block;" [style.color]="player.balance < 0 ? 'red' : null">${{player.balance}}</p>
        </div>
        <button mat-button *ngIf="displayRollDiceButton()" color="primary" (click)="rollDice(player)" >Roll dice !</button>
        <button mat-button *ngIf="displayBuyPropertyButton()" (click)="buyProperty(player)">Buy property !</button>
        <button mat-button *ngIf="canHumanEndTurn && !(player.balance < 0)" (click)="endTurn(player)">End turn</button>
        <button mat-button *ngIf="displayGetFreeButton();" (click)="playerGetFree(player)">Get free for $1000</button>
        <button mat-button *ngIf="player.balance < 0;" (click)="declareBankruptcy(player)">Declare bankruptcy</button>
        <p *ngIf="player.nbTurnsInJail > 0" style="display: inline;">Turns in jail player : {{player.nbTurnsInJail}}</p>


          <div class="table-container">

            <table mat-table [dataSource]="dataSource" style="font-size: 8px;" *ngIf="player.properties.length != 0">
              <ng-container matColumnDef="tier" sticky>
                <th mat-header-cell *matHeaderCellDef></th>
                <td mat-cell *matCellDef="let property">
                  <div style="background-color: violet;" class="tiersquare" *ngIf="property.tier == 'Tier 1' "></div>
                  <div style="background-color: cornflowerblue;" class="tiersquare" *ngIf="property.tier == 'Tier 2' "></div>
                  <div style="background-color: blue;" class="tiersquare" *ngIf="property.tier == 'Tier 3' "></div>
                  <div style="background-color: green;" class="tiersquare" *ngIf="property.tier == 'Tier 4' "></div>
                  <div style="background-color: palevioletred;" class="tiersquare" *ngIf="property.tier == 'Tier 5' "></div>
                  <div style="background-color: yellow;" class="tiersquare" *ngIf="property.tier == 'Tier 6' "></div>
                  <div style="background-color: orange;" class="tiersquare" *ngIf="property.tier == 'Tier 7' "></div>
                  <div style="background-color: red;" class="tiersquare" *ngIf="property.tier == 'Tier 8' "></div>
                  <div *ngIf="!property.isCity() "><img src="assets/img/airplane.png"/></div>
                </td>
              </ng-container>
              <ng-container matColumnDef="name">
                <th mat-header-cell *matHeaderCellDef>Property</th>
                <button></button>
                <td mat-cell *matCellDef="let property">
                  <button mat-button (click)="openPropertyCardDialog(property)" style="font-size: 11px;">{{property.name}}</button>
                </td>
              </ng-container>

              <ng-container matColumnDef="nbHouses" >
                <th mat-header-cell *matHeaderCellDef> Houses </th>
                <ng-container *matCellDef="let property">
                  <td mat-cell *ngIf="property.isCity()">{{property.nbHouses}}</td>
                  <td mat-cell *ngIf="!property.isCity()">-</td>
                </ng-container>
              </ng-container>
              <ng-template #isAirport>-</ng-template>

              <ng-container matColumnDef="rentPrice">
                <th mat-header-cell *matHeaderCellDef>Rent Price</th>
                <ng-container *matCellDef="let property">
                  <td mat-cell *ngIf="property.isCity()" style="font-size: 11px;">${{property.getCurrentRentPrice()}}</td>
                  <td mat-cell *ngIf="!property.isCity()" style="font-size: 11px;">${{property.rentPrices[player.nbAirports]}}</td>
                  <td mat-cell *ngIf="property.isMortgaged" style="font-size: 11px;">(Mortgaged)</td>
                </ng-container>
                
              </ng-container>


              <ng-container matColumnDef="buttons" >
                <th mat-header-cell *matHeaderCellDef></th>
                <ng-container *matCellDef="let property">
                  <td mat-cell>
                    <button mat-mini-fab color="success" class="success" (click)="buyHouse(player, property)" *ngIf=(property.isHouseBuyable) style="display: inline;"><span class="material-icons">home</span></button>
                    <button mat-mini-fab color="warn" (click)="removeHouse(property)" *ngIf="property.nbHouses > 0" style="display: inline;"><span class="material-icons">home</span></button>
                    <button mat-button color="warn" (click)="mortgageProperty(property)" *ngIf=(property.isMortgageable)>Mortgage</button>
                    <button mat-button class="success" (click)="removeMortgage(property)" *ngIf=(property.canMortgageGetPaidOff())>Remove Mortgage</button>
                  </td>
                </ng-container>
              </ng-container>

              
              <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>           
            </table>
          </div> 
          <div>
            <div>        
              <p style="text-align: center; display: inline;">CPU balance : </p><p style="display: inline-block;" [style.color]="CPUPlayer.balance < 0 ? 'red' : null">${{CPUPlayer.balance}}</p>
            </div>
            <p *ngIf="CPUPlayer.nbTurnsInJail > 0" style="display: inline; margin-left: 10px;">Turns in jail player : {{CPUPlayer.nbTurnsInJail}}</p>
            <button mat-button color="primary" (click)="seeProperties(CPUPlayer)" >CPU properties</button>
          </div>
          <div class="table-container">
            <table mat-table [dataSource]="dataSourceEvents">
              <ng-container matColumnDef="event" sticky>
                <th mat-header-cell *matHeaderCellDef>Events</th>
                <td mat-cell *matCellDef="let event"> {{event}} </td>
              </ng-container>
              <tr mat-header-row *matHeaderRowDef="displayedColumnsEvents"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumnsEvents;"></tr>           
            </table>
          </div>  
      </div>
    </div>
  </div>
  